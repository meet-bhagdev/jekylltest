<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="shortcut icon" type="image/png" href="https://upload.wikimedia.org/wikipedia/commons/thumb/4/44/Microsoft_logo.svg/2000px-Microsoft_logo.svg.png">

  <title>
    
      Java macOS
    
  </title>
  <meta name="description" content="Get started with SQL Server on macOS, Linux, and Windows.">
  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="http://localhost:4000/java/mac/step/3">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-62780441-15', 'auto');
  ga('send', 'pageview');
  $(document).ready(function() {
      $("code").bind({
          copy: function(event) {
              ga("send", "event", {
                  eventCategory: window.location.pathname,
                  eventAction: "copy_code"
              });
         console.log("Copy");

          }, 

          cut: function(event) {
              ga("send", "event", {
                  eventCategory: window.location.pathname,
                  eventAction: "copy_code"
              });
          }
      })

      $("a").click(function(event) {
          ga("send", "event", {
              eventCategory: window.location.pathname,
              eventAction: "click_link",
              eventLabel: event.target.href
          });
      })
  });  
  </script>



</head>


  <body>

    <header class="sql-header sql-header--empty" role="banner">
    <div class="sql-header-content">
      <img class="sql-header-micro" src="/assets/images/micro-logo.png" alt="Microsoft logo">
      
        <div class="sql-menutop">
          <a class="sql-menutop-link" href="/">Get started with SQL Server</a>
          <div>
            
              
              

              <div class="sql-menutop-sub ">
                  
                    
                      
                      

                        
                          <span class="sql-menutop-link">C# </span>
                        

                        
                    
                      
                      

                        

                        
                          <div class="sql-menutop-items">
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/csharp/mac" 
                                target="_self">
                                macOS
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/csharp/rhel" 
                                target="_self">
                                RHEL
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/csharp/ubuntu" 
                                target="_self">
                                Ubuntu
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/csharp/windows" 
                                target="_self">
                                Windows
                                
                              </a>
                            
                          </div>
                        
                    
                  
              </div>
            
              
              

              <div class="sql-menutop-sub  is-active ">
                  
                    
                      
                      

                        
                          <span class="sql-menutop-link">Java </span>
                        

                        
                    
                      
                      

                        

                        
                          <div class="sql-menutop-items">
                            
                              
                              
                              

                              <a class="sql-menutop-item  is-active " 
                                href="/java/mac" 
                                target="_self">
                                macOS
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/java/rhel" 
                                target="_self">
                                RHEL
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/java/ubuntu" 
                                target="_self">
                                Ubuntu
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/java/sles" 
                                target="_self">
                                SLES
                                
                                  <i class="sql-new"></i>
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/java/windows" 
                                target="_self">
                                Windows
                                
                              </a>
                            
                          </div>
                        
                    
                  
              </div>
            
              
              

              <div class="sql-menutop-sub ">
                  
                    
                      
                      

                        
                          <span class="sql-menutop-link">Node.js </span>
                        

                        
                    
                      
                      

                        

                        
                          <div class="sql-menutop-items">
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/node/mac" 
                                target="_self">
                                macOS
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/node/rhel" 
                                target="_self">
                                RHEL
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/node/ubuntu" 
                                target="_self">
                                Ubuntu
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/node/sles" 
                                target="_self">
                                SLES
                                
                                  <i class="sql-new"></i>
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/node/windows" 
                                target="_self">
                                Windows
                                
                              </a>
                            
                          </div>
                        
                    
                  
              </div>
            
              
              

              <div class="sql-menutop-sub ">
                  
                    
                      
                      

                        
                          <span class="sql-menutop-link">PHP </span>
                        

                        
                    
                      
                      

                        

                        
                          <div class="sql-menutop-items">
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/php/mac" 
                                target="_self">
                                macOS
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/php/rhel" 
                                target="_self">
                                RHEL
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/php/ubuntu" 
                                target="_self">
                                Ubuntu
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/php/sles" 
                                target="_self">
                                SLES
                                
                                  <i class="sql-new"></i>
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/php/windows" 
                                target="_self">
                                Windows
                                
                              </a>
                            
                          </div>
                        
                    
                  
              </div>
            
              
              

              <div class="sql-menutop-sub ">
                  
                    
                      
                      

                        
                          <span class="sql-menutop-link">Python </span>
                        

                        
                    
                      
                      

                        

                        
                          <div class="sql-menutop-items">
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/python/mac" 
                                target="_self">
                                macOS
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/python/rhel" 
                                target="_self">
                                RHEL
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/python/ubuntu" 
                                target="_self">
                                Ubuntu
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/python/sles" 
                                target="_self">
                                SLES
                                
                                  <i class="sql-new"></i>
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/python/windows" 
                                target="_self">
                                Windows
                                
                              </a>
                            
                          </div>
                        
                    
                  
              </div>
            
              
              

              <div class="sql-menutop-sub ">
                  
                    
                      
                      

                        
                          <span class="sql-menutop-link">Ruby </span>
                        

                        
                    
                      
                      

                        

                        
                          <div class="sql-menutop-items">
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/ruby/mac" 
                                target="_self">
                                macOS
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/ruby/rhel" 
                                target="_self">
                                RHEL
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/ruby/ubuntu" 
                                target="_self">
                                Ubuntu
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/ruby/sles" 
                                target="_self">
                                SLES
                                
                                  <i class="sql-new"></i>
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/ruby/windows" 
                                target="_self">
                                Windows
                                
                              </a>
                            
                          </div>
                        
                    
                  
              </div>
            
          </div>
        </div>

      
</header>


    <main class="sql-main" aria-label="Content">
      <div class="u-wrapper">
        <article class="sql-page_steps">

  
    
    
    

    <h1 class="sql-page_steps-hero">
      Create Java apps using SQL Server on macOS
    </h1>

    <header class="sql-page_steps-steps js-stepsheader">
      
        
        

        <div class="sql-page_steps-step">
          
            <a class="sql-page_steps-link "
               href="/java/mac"
               target="_self">
               <span class="sql-page_steps-number">1</span>
               Set up your environment
              </a>
          
        </div>
      
        
        

        <div class="sql-page_steps-step">
          
            <a class="sql-page_steps-link "
               href="/java/mac/step/2"
               target="_self">
               <span class="sql-page_steps-number">2</span>
               Create Java application with SQL server
            </a>
          
        </div>
      
        
        

        <div class="sql-page_steps-step">
          
            <a class="sql-page_steps-link  sql-page_steps-link--active "
               href="/java/mac/step/3"
               target="_self">
               <span class="sql-page_steps-number">3</span>
               Make your Java app up to 100x faster
            </a>
          
        </div>
      
    </header>
  

  <div class="sql-page_steps-loading js-loading">
    <p></p>
    <p></p>
    <p></p>
    <p></p>
    <div></div>
    <div></div>
    <p></p>
    <div></div>
    <div></div>
    <p></p>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <p></p>
    <p></p>
    <div></div>
    <div></div>
    <div></div>
    <p></p>
    <div></div>
    <div></div>
    <p></p>
    <p></p>
    <div></div>
    <div></div>
    
  </div>

  <div class="js-steps is-hidden">
    
<blockquote>
  <p>In this section we will show you a simple example of Columnstore Indexes and how they can improve data processing speeds. Columnstore Indexes can achieve up to 100x better performance on analytical workloads and up to 10x better data compression than traditional rowstore indexes.</p>
</blockquote>

<h2 id="step-31-create-a-java-app-to-demonstrate-columnstore-indexes">Step 3.1 Create a Java app to demonstrate Columnstore indexes</h2>

<p>To showcase the capabilities of Columnstore indexes, let’s create a Java application that creates a sample database and a sample table with 5 million rows and then runs a simple query before and after adding a Columnstore index.</p>

<p>Change to your home directory. Create your Maven starter package. This will create the project directory with a basic Maven project and pom.xml file.</p>

<div class="language-terminal highlighter-rouge"><pre class="highlight"><code>cd ~/
mvn archetype:generate -DgroupId=com.sqlsamples -DartifactId=SqlServerColumnstoreSample -DarchetypeArtifactId=maven-archetype-quickstart -Dversion=1.0.0
</code></pre>
</div>
<pre><code class="language-results">[INFO] Scanning for projects...
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building Maven Stub Project (No POM) 1
[INFO] ------------------------------------------------------------------------
...
[INFO] Generating project in Interactive mode
[INFO] Using property: groupId = com.sqlsamples
[INFO] Using property: artifactId = SqlServerColumnstoreSample
[INFO] Using property: version = 1.0.0
[INFO] Using property: package = com.sqlsamples
Confirm properties configuration:
groupId: com.sqlsamples
artifactId: SqlServerColumnstoreSample
version: 1.0.0
package: com.sqlsamples
...
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 18.520 s
[INFO] Finished at: 2016-10-15T13:49:20-07:00
[INFO] Final Memory: 14M/208M
[INFO] ------------------------------------------------------------------------
</code></pre>
<p>Add the Microsoft JDBC Driver for SQL Server dependency to your Maven project by opening your favorite text editor and copying and pasting the following lines into your <strong>pom.xml</strong> file. Do not overwrite the existing values prepopulated in the file. The JDBC dependency must be pasted within the larger “dependencies” section (<dependency> </dependency>).</p>

<p>Specify the version of Java to compile the project against by adding the “properties” section below into the pom.xml file. Add the <properties> section below after the <dependencies> section.</dependencies></properties></p>

<p>Save and close the file.</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="c">&lt;!-- prepopulated content by Maven --&gt;</span>
<span class="nt">&lt;dependencies&gt;</span>
    <span class="nt">&lt;dependency&gt;</span>
        <span class="nt">&lt;groupId&gt;</span>com.microsoft.sqlserver<span class="nt">&lt;/groupId&gt;</span>
        <span class="nt">&lt;artifactId&gt;</span>mssql-jdbc<span class="nt">&lt;/artifactId&gt;</span>
        <span class="nt">&lt;version&gt;</span>6.1.0.jre8<span class="nt">&lt;/version&gt;</span>
    <span class="nt">&lt;/dependency&gt;</span>
    <span class="c">&lt;!-- your existing dependencies --&gt;</span>
<span class="nt">&lt;/dependencies&gt;</span>
<span class="nt">&lt;properties&gt;</span>
    <span class="nt">&lt;maven.compiler.source&gt;</span>1.8<span class="nt">&lt;/maven.compiler.source&gt;</span>
    <span class="nt">&lt;maven.compiler.target&gt;</span>1.8<span class="nt">&lt;/maven.compiler.target&gt;</span>
    <span class="c">&lt;!-- your existing properties --&gt;</span>
<span class="nt">&lt;/properties&gt;</span>
<span class="c">&lt;!-- prepopulated content by Maven --&gt;</span>
</code></pre>
</div>
<p>Change directories into your newly created project.</p>

<div class="language-terminal highlighter-rouge"><pre class="highlight"><code>cd ~/SqlServerColumnstoreSample
</code></pre>
</div>

<p>You should already have a file called <strong>App.java</strong> in your Maven project located at: ~/SqlServerColumnstoreSample/src/main/java/com/sqlsamples/App.java</p>

<p>Open this file in your favorite text editor and replace the contents with the code below. Don’t forget to update the username and password with your own. Save and close the file.</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">sqlsamples</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.math.BigDecimal</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.Connection</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.DriverManager</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.ResultSet</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.sql.Statement</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">App</span> <span class="o">{</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

		<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"*** SQL Server Columnstore demo ***"</span><span class="o">);</span>

		<span class="c1">// Update the username and password below</span>
		<span class="n">String</span> <span class="n">connectionUrl</span> <span class="o">=</span> <span class="s">"jdbc:sqlserver://localhost:1433;databaseName=master;user=sa;password=your_password"</span><span class="o">;</span>

		<span class="c1">// Load SQL Server JDBC driver and establish connection.</span>
		<span class="k">try</span> <span class="o">{</span>
			<span class="c1">// Load SQL Server JDBC driver and establish connection.</span>
			<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"Connecting to SQL Server ... "</span><span class="o">);</span>
			<span class="k">try</span> <span class="o">(</span><span class="n">Connection</span> <span class="n">connection</span> <span class="o">=</span> <span class="n">DriverManager</span><span class="o">.</span><span class="na">getConnection</span><span class="o">(</span><span class="n">connectionUrl</span><span class="o">))</span> <span class="o">{</span>
				<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Done."</span><span class="o">);</span>

				<span class="c1">// Create an example database</span>
				<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"Dropping and creating database 'SampleDB' ... "</span><span class="o">);</span>
				<span class="n">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="s">"DROP DATABASE IF EXISTS [SampleDB]; CREATE DATABASE [SampleDB]"</span><span class="o">;</span>
				<span class="k">try</span> <span class="o">(</span><span class="n">Statement</span> <span class="n">statement</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="na">createStatement</span><span class="o">())</span> <span class="o">{</span>
					<span class="n">statement</span><span class="o">.</span><span class="na">executeUpdate</span><span class="o">(</span><span class="n">sql</span><span class="o">);</span>
					<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Done."</span><span class="o">);</span>
				<span class="o">}</span>
				<span class="c1">// Insert 5 million rows into the table 'Table_with_5M_rows'</span>
				<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span>
						<span class="s">"Inserting 5 million rows into table 'Table_with_5M_rows'. This takes ~1 minute, please wait ... "</span><span class="o">);</span>
				<span class="n">sql</span> <span class="o">=</span> <span class="k">new</span> <span class="n">StringBuilder</span><span class="o">().</span><span class="na">append</span><span class="o">(</span><span class="s">"USE SampleDB; "</span><span class="o">)</span>
						<span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"WITH a AS (SELECT * FROM (VALUES(1),(2),(3),(4),(5),(6),(7),(8),(9),(10)) AS a(a))"</span><span class="o">)</span>
						<span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"SELECT TOP(5000000)"</span><span class="o">).</span><span class="na">append</span><span class="o">(</span><span class="s">"ROW_NUMBER() OVER (ORDER BY a.a) AS OrderItemId "</span><span class="o">)</span>
						<span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">",a.a + b.a + c.a + d.a + e.a + f.a + g.a + h.a AS OrderId "</span><span class="o">)</span>
						<span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">",a.a * 10 AS Price "</span><span class="o">)</span>
						<span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">",CONCAT(a.a, N' ', b.a, N' ', c.a, N' ', d.a, N' ', e.a, N' ', f.a, N' ', g.a, N' ', h.a) AS ProductName "</span><span class="o">)</span>
						<span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"INTO Table_with_5M_rows "</span><span class="o">)</span>
						<span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s">"FROM a, a AS b, a AS c, a AS d, a AS e, a AS f, a AS g, a AS h;"</span><span class="o">).</span><span class="na">toString</span><span class="o">();</span>
				<span class="k">try</span> <span class="o">(</span><span class="n">Statement</span> <span class="n">statement</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="na">createStatement</span><span class="o">())</span> <span class="o">{</span>
					<span class="n">statement</span><span class="o">.</span><span class="na">executeUpdate</span><span class="o">(</span><span class="n">sql</span><span class="o">);</span>
					<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Done."</span><span class="o">);</span>
				<span class="o">}</span>

				<span class="c1">// Execute SQL query without a columnstore index</span>
				<span class="kt">long</span> <span class="n">elapsedTimeWithoutIndex</span> <span class="o">=</span> <span class="n">SumPrice</span><span class="o">(</span><span class="n">connection</span><span class="o">);</span>
				<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Query time WITHOUT columnstore index: "</span> <span class="o">+</span> <span class="n">elapsedTimeWithoutIndex</span> <span class="o">+</span> <span class="s">"ms"</span><span class="o">);</span>

				<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">print</span><span class="o">(</span><span class="s">"Adding a columnstore to table 'Table_with_5M_rows'  ... "</span><span class="o">);</span>
				<span class="n">sql</span> <span class="o">=</span> <span class="s">"CREATE CLUSTERED COLUMNSTORE INDEX columnstoreindex ON Table_with_5M_rows;"</span><span class="o">;</span>
				<span class="k">try</span> <span class="o">(</span><span class="n">Statement</span> <span class="n">statement</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="na">createStatement</span><span class="o">())</span> <span class="o">{</span>
					<span class="n">statement</span><span class="o">.</span><span class="na">executeUpdate</span><span class="o">(</span><span class="n">sql</span><span class="o">);</span>
					<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Done."</span><span class="o">);</span>
				<span class="o">}</span>

				<span class="c1">// Execute the same SQL query again after the columnstore index</span>
				<span class="c1">// is added</span>
				<span class="kt">long</span> <span class="n">elapsedTimeWithIndex</span> <span class="o">=</span> <span class="n">SumPrice</span><span class="o">(</span><span class="n">connection</span><span class="o">);</span>
				<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Query time WITH columnstore index: "</span> <span class="o">+</span> <span class="n">elapsedTimeWithIndex</span> <span class="o">+</span> <span class="s">"ms"</span><span class="o">);</span>

				<span class="c1">// Calculate performance gain from adding columnstore index</span>
				<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Performance improvement with columnstore index: "</span>
						<span class="o">+</span> <span class="n">elapsedTimeWithoutIndex</span> <span class="o">/</span> <span class="n">elapsedTimeWithIndex</span> <span class="o">+</span> <span class="s">"x!"</span><span class="o">);</span>

			<span class="o">}</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
			<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">""</span><span class="o">);</span>
			<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
		<span class="o">}</span>
	<span class="o">}</span>

	<span class="kd">public</span> <span class="kd">static</span> <span class="kt">long</span> <span class="nf">SumPrice</span><span class="o">(</span><span class="n">Connection</span> <span class="n">connection</span><span class="o">)</span> <span class="o">{</span>
		<span class="n">String</span> <span class="n">sql</span> <span class="o">=</span> <span class="s">"SELECT SUM(Price) FROM Table_with_5M_rows;"</span><span class="o">;</span>
		<span class="kt">long</span> <span class="n">startTime</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">();</span>
		<span class="k">try</span> <span class="o">(</span><span class="n">Statement</span> <span class="n">statement</span> <span class="o">=</span> <span class="n">connection</span><span class="o">.</span><span class="na">createStatement</span><span class="o">();</span> <span class="n">ResultSet</span> <span class="n">resultSet</span> <span class="o">=</span> <span class="n">statement</span><span class="o">.</span><span class="na">executeQuery</span><span class="o">(</span><span class="n">sql</span><span class="o">))</span> <span class="o">{</span>
			<span class="k">while</span> <span class="o">(</span><span class="n">resultSet</span><span class="o">.</span><span class="na">next</span><span class="o">())</span> <span class="o">{</span>
				<span class="kt">long</span> <span class="n">elapsedTime</span> <span class="o">=</span> <span class="n">System</span><span class="o">.</span><span class="na">currentTimeMillis</span><span class="o">()</span> <span class="o">-</span> <span class="n">startTime</span><span class="o">;</span>
				<span class="k">return</span> <span class="n">elapsedTime</span><span class="o">;</span>
			<span class="o">}</span>
		<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
			<span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">""</span><span class="o">);</span>
			<span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
		<span class="o">}</span>
		<span class="k">return</span> <span class="mi">0</span><span class="o">;</span>
	<span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>
<p>Build the project and create a jar package using the following command:</p>

<div class="language-terminal highlighter-rouge"><pre class="highlight"><code>cd ~/SqlServerColumnstoreSample
mvn package
</code></pre>
</div>
<pre><code class="language-results">[INFO] Scanning for projects...
[INFO]
[INFO] ------------------------------------------------------------------------
[INFO] Building SqlServerColumnstoreSample 1.0.0
[INFO] ------------------------------------------------------------------------
...
[INFO] Building jar: /Users/usr1/SqlServerColumnstoreSample/target/SqlServerColumnstoreSample-1.0.0.jar
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 2.173 s
[INFO] Finished at: 2016-10-15T13:59:15-07:00
[INFO] Final Memory: 17M/207M
[INFO] ------------------------------------------------------------------------
</code></pre>

<p>Now run the application. You can remove the of “-q” in the command below to show info messages from Maven.</p>

<div class="language-terminal highlighter-rouge"><pre class="highlight"><code>mvn -q exec:java -Dexec.mainClass=com.sqlsamples.App
</code></pre>
</div>
<pre><code class="language-results">*** SQL Server Columnstore demo ***
Connecting to SQL Server ... Done.
Dropping and creating database 'SampleDB' ... Done.
Inserting 5 million rows into table 'Table_with_5M_rows'. This takes ~1 minute, please wait ... Done.
Query time WITHOUT columnstore index: 363ms
Adding a columnstore to table 'Table_with_5M_rows'  ... Done.
Query time WITH columnstore index: 5ms
Performance improvement with columnstore index: 71x!
</code></pre>
<blockquote>
  <p>Congrats you just made your Java app faster using Columnstore Indexes!</p>
</blockquote>


  </div>

  
    
    

          
            <a class="sql-page_steps-next" href="https://github.com/Microsoft/mssql-jdbc">Check out the JDBC Driver on GitHub</a>
          

      <div class="sql-resources">
    <header class="sql-resources-header">
        <h3 class="sql-resources-title">
            To get general documentations
        </h3>
        <a class="sql-resources-button"
            target="_blank"
            href="https://msdn.microsoft.com/en-us/library/mt590198(v=sql.1).aspx">
            Read the SQL Server documentation
        </a>
    </header>

    <div class="sql-resources-list">
        <h3 class="sql-resources-title">
            Check out other related tutorials and SQL Server features!
        </h3>
        
            <ul class="sql-resources-items">
                
                    
                    
                
                    
                    
                        <li class="sql-resources-item">
                            Check out what's new with <a class="sql-resources-link" href="https://channel9.msdn.com/Events/Connect/2016/152" target="_blank">SQL Server + Java on Channel 9</a>
                        </li>
                    
                
                    
                    
                
                    
                    
                
                    
                    
                
                    
                    
                        <li class="sql-resources-item">
                            Browse more SQL Server code samples (In-Memory, Dynamic Data Masking, R, etc.) on our <a class="sql-resources-link" href="https://github.com/Microsoft/sql-server-samples/tree/master/samples/" target="_blank">GitHub repository</a>
                        </li>
                    
                
                    
                    
                        <li class="sql-resources-item">
                            Learn more about <a class="sql-resources-link" href="https://channel9.msdn.com/Events/Connect/2016/101" target="_blank">SQL Server on Linux</a>
                        </li>
                    
                
                    
                    
                        <li class="sql-resources-item">
                            Watch more <a class="sql-resources-link" href="https://channel9.msdn.com/Events/Connect/2016" target="_blank">Connect(); event videos</a>
                        </li>
                    
                
                    
                    
                        <li class="sql-resources-item">
                            Browse our <a class="sql-resources-link" href="https://technet.microsoft.com/en-us/virtuallabs" target="_blank">Virtual Labs Gallery</a>
                        </li>
                    
                
            </ul>
      
    </div>
</div>
    
  

  <div class="sql-questions">
    <h2 class="sql-questions-title">
        Have Questions?
    </h2>
    <p class="sql-questions-text">
        Happy to help! You can find us on <a href="https://github.com/Microsoft/sql-server-samples/tree/master/samples/tutorials" target="_blank">GitHub</a>, <a href="https://social.msdn.microsoft.com/Forums/en-US/home target="_blank"">MSDN Forums</a>, and StackOverflow. We also monitor the <a href="https://twitter.com/search?q=%23SQLServerDev&amp;src=typd" target="_blank">#SQLServerDev</a> hashtag on Twitter.
    </p>
</div>

  
      <footer class="sql-disqus">
        

      </footer>
  
</article>

      </div>
    </main>

    <footer class="sql-footer">
  




    <div class="sql-footer-copy">
        <a class="sql-footer-link" href="https://go.microsoft.com/?linkid=2028325">Contact us</a> | 
        <a class="sql-footer-link" href="https://go.microsoft.com/fwlink/?LinkId=521839">Privacy & cookies</a> | 
        <a class="sql-footer-link" href="https://go.microsoft.com/fwlink/?LinkID=206977">Terms of use</a> | 
        <a class="sql-footer-link" href="https://www.microsoft.com/trademarks">Trademarks</a> | 
        <a class="sql-footer-link" href="https://choice.microsoft.com/">About our ads</a> | 
        © 2017 Microsoft 
      <!--
        <a href="#" target="_blank" class="sql-footer-icon fa fa-twitter" aria-hidden="true" style="float:right;"></a>
        <a href="#" target="_blank" class="sql-footer-icon fa fa-github" aria-hidden="true" style="float:right;"></a>
      -->
    </div>

           
</footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.6.0/clipboard.min.js" type="text/javascript"></script>
<script src="https://use.fontawesome.com/c7b2a63f93.js"></script>
<script src="/assets/scripts/prism.js" type="text/javascript"></script>
<script src="/assets/scripts/steps.js" type="text/javascript"></script>
<script>
  ((window.gitter = {}).chat = {}).options = {
    room: 'Microsoft/mssql-developers'
  };
</script>
<script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>
  </body>

</html>
