<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="shortcut icon" type="image/png" href="https://upload.wikimedia.org/wikipedia/commons/thumb/4/44/Microsoft_logo.svg/2000px-Microsoft_logo.svg.png">

  <title>
    
      C# RHEL
    
  </title>
  <meta name="description" content="Get started with SQL Server on macOS, Linux, and Windows.">
  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="http://localhost:4000/csharp/rhel/step/2">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>

  
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-62780441-15', 'auto');
  ga('send', 'pageview');
  $(document).ready(function() {
      $("code").bind({
          copy: function(event) {
              ga("send", "event", {
                  eventCategory: window.location.pathname,
                  eventAction: "copy_code"
              });
         console.log("Copy");

          }, 

          cut: function(event) {
              ga("send", "event", {
                  eventCategory: window.location.pathname,
                  eventAction: "copy_code"
              });
          }
      })

      $("a").click(function(event) {
          ga("send", "event", {
              eventCategory: window.location.pathname,
              eventAction: "click_link",
              eventLabel: event.target.href
          });
      })
  });  
  </script>



</head>


  <body>

    <header class="sql-header sql-header--empty" role="banner">
    <div class="sql-header-content">
      <img class="sql-header-micro" src="/assets/images/micro-logo.png" alt="Microsoft logo">
      
        <div class="sql-menutop">
          <a class="sql-menutop-link" href="/">Get started with SQL Server</a>
          <div>
            
              
              

              <div class="sql-menutop-sub  is-active ">
                  
                    
                      
                      

                        
                          <span class="sql-menutop-link">C# </span>
                        

                        
                    
                      
                      

                        

                        
                          <div class="sql-menutop-items">
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/csharp/mac" 
                                target="_self">
                                macOS
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item  is-active " 
                                href="/csharp/rhel" 
                                target="_self">
                                RHEL
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/csharp/ubuntu" 
                                target="_self">
                                Ubuntu
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/csharp/windows" 
                                target="_self">
                                Windows
                                
                              </a>
                            
                          </div>
                        
                    
                  
              </div>
            
              
              

              <div class="sql-menutop-sub ">
                  
                    
                      
                      

                        
                          <span class="sql-menutop-link">Java </span>
                        

                        
                    
                      
                      

                        

                        
                          <div class="sql-menutop-items">
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/java/mac" 
                                target="_self">
                                macOS
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/java/rhel" 
                                target="_self">
                                RHEL
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/java/ubuntu" 
                                target="_self">
                                Ubuntu
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/java/sles" 
                                target="_self">
                                SLES
                                
                                  <i class="sql-new"></i>
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/java/windows" 
                                target="_self">
                                Windows
                                
                              </a>
                            
                          </div>
                        
                    
                  
              </div>
            
              
              

              <div class="sql-menutop-sub ">
                  
                    
                      
                      

                        
                          <span class="sql-menutop-link">Node.js </span>
                        

                        
                    
                      
                      

                        

                        
                          <div class="sql-menutop-items">
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/node/mac" 
                                target="_self">
                                macOS
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/node/rhel" 
                                target="_self">
                                RHEL
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/node/ubuntu" 
                                target="_self">
                                Ubuntu
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/node/sles" 
                                target="_self">
                                SLES
                                
                                  <i class="sql-new"></i>
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/node/windows" 
                                target="_self">
                                Windows
                                
                              </a>
                            
                          </div>
                        
                    
                  
              </div>
            
              
              

              <div class="sql-menutop-sub ">
                  
                    
                      
                      

                        
                          <span class="sql-menutop-link">PHP </span>
                        

                        
                    
                      
                      

                        

                        
                          <div class="sql-menutop-items">
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/php/mac" 
                                target="_self">
                                macOS
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/php/rhel" 
                                target="_self">
                                RHEL
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/php/ubuntu" 
                                target="_self">
                                Ubuntu
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/php/sles" 
                                target="_self">
                                SLES
                                
                                  <i class="sql-new"></i>
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/php/windows" 
                                target="_self">
                                Windows
                                
                              </a>
                            
                          </div>
                        
                    
                  
              </div>
            
              
              

              <div class="sql-menutop-sub ">
                  
                    
                      
                      

                        
                          <span class="sql-menutop-link">Python </span>
                        

                        
                    
                      
                      

                        

                        
                          <div class="sql-menutop-items">
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/python/mac" 
                                target="_self">
                                macOS
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/python/rhel" 
                                target="_self">
                                RHEL
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/python/ubuntu" 
                                target="_self">
                                Ubuntu
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/python/sles" 
                                target="_self">
                                SLES
                                
                                  <i class="sql-new"></i>
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/python/windows" 
                                target="_self">
                                Windows
                                
                              </a>
                            
                          </div>
                        
                    
                  
              </div>
            
              
              

              <div class="sql-menutop-sub ">
                  
                    
                      
                      

                        
                          <span class="sql-menutop-link">Ruby </span>
                        

                        
                    
                      
                      

                        

                        
                          <div class="sql-menutop-items">
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/ruby/mac" 
                                target="_self">
                                macOS
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/ruby/rhel" 
                                target="_self">
                                RHEL
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/ruby/ubuntu" 
                                target="_self">
                                Ubuntu
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/ruby/sles" 
                                target="_self">
                                SLES
                                
                                  <i class="sql-new"></i>
                                
                              </a>
                            
                              
                              
                              

                              <a class="sql-menutop-item " 
                                href="/ruby/windows" 
                                target="_self">
                                Windows
                                
                              </a>
                            
                          </div>
                        
                    
                  
              </div>
            
          </div>
        </div>

      
</header>


    <main class="sql-main" aria-label="Content">
      <div class="u-wrapper">
        <article class="sql-page_steps">

  
    
    
    

    <h1 class="sql-page_steps-hero">
      Create C# apps using SQL Server on RHEL
    </h1>

    <header class="sql-page_steps-steps js-stepsheader">
      
        
        

        <div class="sql-page_steps-step">
          
            <a class="sql-page_steps-link "
               href="/csharp/rhel"
               target="_self">
               <span class="sql-page_steps-number">1</span>
               Set up your environment
              </a>
          
        </div>
      
        
        

        <div class="sql-page_steps-step">
          
            <a class="sql-page_steps-link  sql-page_steps-link--active "
               href="/csharp/rhel/step/2"
               target="_self">
               <span class="sql-page_steps-number">2</span>
               Create C# application with SQL server
            </a>
          
        </div>
      
        
        

        <div class="sql-page_steps-step">
          
            <a class="sql-page_steps-link "
               href="/csharp/rhel/step/3"
               target="_self">
               <span class="sql-page_steps-number">3</span>
               Make your C# app up to 100x faster
            </a>
          
        </div>
      
    </header>
  

  <div class="sql-page_steps-loading js-loading">
    <p></p>
    <p></p>
    <p></p>
    <p></p>
    <div></div>
    <div></div>
    <p></p>
    <div></div>
    <div></div>
    <p></p>
    <div></div>
    <div></div>
    <div></div>
    <div></div>
    <p></p>
    <p></p>
    <div></div>
    <div></div>
    <div></div>
    <p></p>
    <div></div>
    <div></div>
    <p></p>
    <p></p>
    <div></div>
    <div></div>
    
  </div>

  <div class="js-steps is-hidden">
    
<blockquote>
  <p>In this section you will create two simple C# projects. One of them will perform basic Insert, Update, Delete, and Select, while the second one will make use of <a href="https://docs.efproject.net/en/latest/">Entity Framework Core</a>, a popular object relational mapping (ORM) framework for .NET Core to execute the same operations.</p>
</blockquote>

<h2 id="step-21-create-a-c-app-that-connects-to-sql-server-and-executes-queries">Step 2.1 Create a C# app that connects to SQL Server and executes queries</h2>

<p>Change to your home directory. Create a new .NET Core project. This will create the project directory with a basic .NET Core Program.cs and csproj file.</p>

<div class="language-terminal highlighter-rouge"><pre class="highlight"><code>cd ~/
dotnet new console -o SqlServerSample
</code></pre>
</div>
<pre><code class="language-results">The template "Console Application" created successfully.

You should already have a file called **SqlServerSample.csproj** in your .NET Core project located at: ~/SqlServerSample

Open this file in your favorite text editor and replace the contents with the code below to add System.Data.SqlClient to your project. Save and close the file.

```xml
&lt;Project Sdk="Microsoft.NET.Sdk"&gt;

  &lt;PropertyGroup&gt;
    &lt;OutputType&gt;Exe&lt;/OutputType&gt;
    &lt;TargetFramework&gt;netcoreapp1.1&lt;/TargetFramework&gt;
  &lt;/PropertyGroup&gt;

  &lt;ItemGroup&gt;
    &lt;PackageReference Include="System.Data.SqlClient" Version="4.3.0" /&gt;
  &lt;/ItemGroup&gt;

&lt;/Project&gt;
</code></pre>

<p>You should already have a file called <strong>Program.cs</strong> in your .NET Core project located at: ~/SqlServerSample</p>

<p>Open this file in your favorite text editor and replace the contents with the code below. Don’t forget to replace the username and password with your own. Save and close the file.</p>

<div class="language-c# highlighter-rouge"><pre class="highlight"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Data.SqlClient</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">SqlServerSample</span>
<span class="p">{</span>
    <span class="k">class</span> <span class="nc">Program</span>
    <span class="p">{</span>
        <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">try</span>
            <span class="p">{</span>
                <span class="c1">// Build connection string
</span>                <span class="n">SqlConnectionStringBuilder</span> <span class="n">builder</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SqlConnectionStringBuilder</span><span class="p">();</span>
                <span class="n">builder</span><span class="p">.</span><span class="n">DataSource</span> <span class="p">=</span> <span class="s">"localhost"</span><span class="p">;</span>   <span class="c1">// update me
</span>                <span class="n">builder</span><span class="p">.</span><span class="n">UserID</span> <span class="p">=</span> <span class="s">"sa"</span><span class="p">;</span>              <span class="c1">// update me
</span>                <span class="n">builder</span><span class="p">.</span><span class="n">Password</span> <span class="p">=</span> <span class="s">"your_password"</span><span class="p">;</span>      <span class="c1">// update me
</span>                <span class="n">builder</span><span class="p">.</span><span class="n">InitialCatalog</span> <span class="p">=</span> <span class="s">"master"</span><span class="p">;</span>

                <span class="c1">// Connect to SQL
</span>                <span class="n">Console</span><span class="p">.</span><span class="nf">Write</span><span class="p">(</span><span class="s">"Connecting to SQL Server ... "</span><span class="p">);</span>
                <span class="k">using</span> <span class="p">(</span><span class="n">SqlConnection</span> <span class="n">connection</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SqlConnection</span><span class="p">(</span><span class="n">builder</span><span class="p">.</span><span class="n">ConnectionString</span><span class="p">))</span>
                <span class="p">{</span>
                    <span class="n">connection</span><span class="p">.</span><span class="nf">Open</span><span class="p">();</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Done."</span><span class="p">);</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">catch</span> <span class="p">(</span><span class="n">SqlException</span> <span class="n">e</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="nf">ToString</span><span class="p">());</span>
            <span class="p">}</span>

            <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"All done. Press any key to finish..."</span><span class="p">);</span>
            <span class="n">Console</span><span class="p">.</span><span class="nf">ReadKey</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>
<p>Change directories into the project folder and restore the dependencies in the csproj by running the following commands.</p>

<div class="language-terminal highlighter-rouge"><pre class="highlight"><code>cd ~/SqlServerSample
dotnet restore
</code></pre>
</div>
<pre><code class="language-results">Restoring packages for /Users/usr1/SqlServerSample/SqlServerSample.csproj...
  Generating MSBuild file /Users/usr1/SqlServerSample/obj/SqlServerSample.csproj.nuget.g.props.
  Generating MSBuild file /Users/usr1/SqlServerSample/obj/SqlServerSample.csproj.nuget.g.targets.
  Writing lock file to disk. Path: /Users/usr1/SqlServerSample/obj/project.assets.json
  Restore completed in 5.79 sec for /Users/usr1/SqlServerSample/SqlServerSample.csproj.

  NuGet Config files used:
      /Users/usr1/.nuget/NuGet/NuGet.Config

  Feeds used:
      https://api.nuget.org/v3/index.json
</code></pre>
<p>Now build and run.</p>
<div class="language-terminal highlighter-rouge"><pre class="highlight"><code>dotnet run
</code></pre>
</div>
<pre><code class="language-results">Connecting to SQL Server ... Done.
All done. Press any key to finish...
</code></pre>
<p>Now replace the code in <strong>Program.cs</strong> by opening the file in your favorite text editor and copying and pasting the code below into the file. This will create a database and a table, and will insert, update, delete, and read a few rows. Don’t forget to update the username and password with your own. Save and close the file.</p>
<div class="language-c# highlighter-rouge"><pre class="highlight"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Text</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Data.SqlClient</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">SqlServerSample</span>
<span class="p">{</span>
    <span class="k">class</span> <span class="nc">Program</span>
    <span class="p">{</span>
        <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">try</span>
            <span class="p">{</span>
                <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Connect to SQL Server and demo Create, Read, Update and Delete operations."</span><span class="p">);</span>

                <span class="c1">// Build connection string
</span>                <span class="n">SqlConnectionStringBuilder</span> <span class="n">builder</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SqlConnectionStringBuilder</span><span class="p">();</span>
                <span class="n">builder</span><span class="p">.</span><span class="n">DataSource</span> <span class="p">=</span> <span class="s">"localhost"</span><span class="p">;</span>   <span class="c1">// update me
</span>                <span class="n">builder</span><span class="p">.</span><span class="n">UserID</span> <span class="p">=</span> <span class="s">"sa"</span><span class="p">;</span>              <span class="c1">// update me
</span>                <span class="n">builder</span><span class="p">.</span><span class="n">Password</span> <span class="p">=</span> <span class="s">"your_password"</span><span class="p">;</span>      <span class="c1">// update me
</span>                <span class="n">builder</span><span class="p">.</span><span class="n">InitialCatalog</span> <span class="p">=</span> <span class="s">"master"</span><span class="p">;</span>

                <span class="c1">// Connect to SQL
</span>                <span class="n">Console</span><span class="p">.</span><span class="nf">Write</span><span class="p">(</span><span class="s">"Connecting to SQL Server ... "</span><span class="p">);</span>
                <span class="k">using</span> <span class="p">(</span><span class="n">SqlConnection</span> <span class="n">connection</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SqlConnection</span><span class="p">(</span><span class="n">builder</span><span class="p">.</span><span class="n">ConnectionString</span><span class="p">))</span>
                <span class="p">{</span>
                    <span class="n">connection</span><span class="p">.</span><span class="nf">Open</span><span class="p">();</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Done."</span><span class="p">);</span>

                    <span class="c1">// Create a sample database
</span>                    <span class="n">Console</span><span class="p">.</span><span class="nf">Write</span><span class="p">(</span><span class="s">"Dropping and creating database 'SampleDB' ... "</span><span class="p">);</span>
                    <span class="n">String</span> <span class="n">sql</span> <span class="p">=</span> <span class="s">"DROP DATABASE IF EXISTS [SampleDB]; CREATE DATABASE [SampleDB]"</span><span class="p">;</span>
                    <span class="k">using</span> <span class="p">(</span><span class="n">SqlCommand</span> <span class="n">command</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SqlCommand</span><span class="p">(</span><span class="n">sql</span><span class="p">,</span> <span class="n">connection</span><span class="p">))</span>
                    <span class="p">{</span>
                        <span class="n">command</span><span class="p">.</span><span class="nf">ExecuteNonQuery</span><span class="p">();</span>
                        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Done."</span><span class="p">);</span>
                    <span class="p">}</span>

                    <span class="c1">// Create a Table and insert some sample data
</span>                    <span class="n">Console</span><span class="p">.</span><span class="nf">Write</span><span class="p">(</span><span class="s">"Creating sample table with data, press any key to continue..."</span><span class="p">);</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">ReadKey</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>
                    <span class="n">StringBuilder</span> <span class="n">sb</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">StringBuilder</span><span class="p">();</span>
                    <span class="n">sb</span><span class="p">.</span><span class="nf">Append</span><span class="p">(</span><span class="s">"USE SampleDB; "</span><span class="p">);</span>
                    <span class="n">sb</span><span class="p">.</span><span class="nf">Append</span><span class="p">(</span><span class="s">"CREATE TABLE Employees ( "</span><span class="p">);</span>
                    <span class="n">sb</span><span class="p">.</span><span class="nf">Append</span><span class="p">(</span><span class="s">" Id INT IDENTITY(1,1) NOT NULL PRIMARY KEY, "</span><span class="p">);</span>
                    <span class="n">sb</span><span class="p">.</span><span class="nf">Append</span><span class="p">(</span><span class="s">" Name NVARCHAR(50), "</span><span class="p">);</span>
                    <span class="n">sb</span><span class="p">.</span><span class="nf">Append</span><span class="p">(</span><span class="s">" Location NVARCHAR(50) "</span><span class="p">);</span>
                    <span class="n">sb</span><span class="p">.</span><span class="nf">Append</span><span class="p">(</span><span class="s">"); "</span><span class="p">);</span>
                    <span class="n">sb</span><span class="p">.</span><span class="nf">Append</span><span class="p">(</span><span class="s">"INSERT INTO Employees (Name, Location) VALUES "</span><span class="p">);</span>
                    <span class="n">sb</span><span class="p">.</span><span class="nf">Append</span><span class="p">(</span><span class="s">"(N'Jared', N'Australia'), "</span><span class="p">);</span>
                    <span class="n">sb</span><span class="p">.</span><span class="nf">Append</span><span class="p">(</span><span class="s">"(N'Nikita', N'India'), "</span><span class="p">);</span>
                    <span class="n">sb</span><span class="p">.</span><span class="nf">Append</span><span class="p">(</span><span class="s">"(N'Tom', N'Germany'); "</span><span class="p">);</span>
                    <span class="n">sql</span> <span class="p">=</span> <span class="n">sb</span><span class="p">.</span><span class="nf">ToString</span><span class="p">();</span>
                    <span class="k">using</span> <span class="p">(</span><span class="n">SqlCommand</span> <span class="n">command</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SqlCommand</span><span class="p">(</span><span class="n">sql</span><span class="p">,</span> <span class="n">connection</span><span class="p">))</span>
                    <span class="p">{</span>
                        <span class="n">command</span><span class="p">.</span><span class="nf">ExecuteNonQuery</span><span class="p">();</span>
                        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Done."</span><span class="p">);</span>
                    <span class="p">}</span>

                    <span class="c1">// INSERT demo
</span>                    <span class="n">Console</span><span class="p">.</span><span class="nf">Write</span><span class="p">(</span><span class="s">"Inserting a new row into table, press any key to continue..."</span><span class="p">);</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">ReadKey</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>
                    <span class="n">sb</span><span class="p">.</span><span class="nf">Clear</span><span class="p">();</span>
                    <span class="n">sb</span><span class="p">.</span><span class="nf">Append</span><span class="p">(</span><span class="s">"INSERT Employees (Name, Location) "</span><span class="p">);</span>
                    <span class="n">sb</span><span class="p">.</span><span class="nf">Append</span><span class="p">(</span><span class="s">"VALUES (@name, @location);"</span><span class="p">);</span>
                    <span class="n">sql</span> <span class="p">=</span> <span class="n">sb</span><span class="p">.</span><span class="nf">ToString</span><span class="p">();</span>
                    <span class="k">using</span> <span class="p">(</span><span class="n">SqlCommand</span> <span class="n">command</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SqlCommand</span><span class="p">(</span><span class="n">sql</span><span class="p">,</span> <span class="n">connection</span><span class="p">))</span>
                    <span class="p">{</span>
                        <span class="n">command</span><span class="p">.</span><span class="n">Parameters</span><span class="p">.</span><span class="nf">AddWithValue</span><span class="p">(</span><span class="s">"@name"</span><span class="p">,</span> <span class="s">"Jake"</span><span class="p">);</span>
                        <span class="n">command</span><span class="p">.</span><span class="n">Parameters</span><span class="p">.</span><span class="nf">AddWithValue</span><span class="p">(</span><span class="s">"@location"</span><span class="p">,</span> <span class="s">"United States"</span><span class="p">);</span>
                        <span class="kt">int</span> <span class="n">rowsAffected</span> <span class="p">=</span> <span class="n">command</span><span class="p">.</span><span class="nf">ExecuteNonQuery</span><span class="p">();</span>
                        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">rowsAffected</span> <span class="p">+</span> <span class="s">" row(s) inserted"</span><span class="p">);</span>
                    <span class="p">}</span>

                    <span class="c1">// UPDATE demo
</span>                    <span class="n">String</span> <span class="n">userToUpdate</span> <span class="p">=</span> <span class="s">"Nikita"</span><span class="p">;</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">Write</span><span class="p">(</span><span class="s">"Updating 'Location' for user '"</span> <span class="p">+</span> <span class="n">userToUpdate</span> <span class="p">+</span> <span class="s">"', press any key to continue..."</span><span class="p">);</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">ReadKey</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>
                    <span class="n">sb</span><span class="p">.</span><span class="nf">Clear</span><span class="p">();</span>
                    <span class="n">sb</span><span class="p">.</span><span class="nf">Append</span><span class="p">(</span><span class="s">"UPDATE Employees SET Location = N'United States' WHERE Name = @name"</span><span class="p">);</span>
                    <span class="n">sql</span> <span class="p">=</span> <span class="n">sb</span><span class="p">.</span><span class="nf">ToString</span><span class="p">();</span>
                    <span class="k">using</span> <span class="p">(</span><span class="n">SqlCommand</span> <span class="n">command</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SqlCommand</span><span class="p">(</span><span class="n">sql</span><span class="p">,</span> <span class="n">connection</span><span class="p">))</span>
                    <span class="p">{</span>
                        <span class="n">command</span><span class="p">.</span><span class="n">Parameters</span><span class="p">.</span><span class="nf">AddWithValue</span><span class="p">(</span><span class="s">"@name"</span><span class="p">,</span> <span class="n">userToUpdate</span><span class="p">);</span>
                        <span class="kt">int</span> <span class="n">rowsAffected</span> <span class="p">=</span> <span class="n">command</span><span class="p">.</span><span class="nf">ExecuteNonQuery</span><span class="p">();</span>
                        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">rowsAffected</span> <span class="p">+</span> <span class="s">" row(s) updated"</span><span class="p">);</span>
                    <span class="p">}</span>

                    <span class="c1">// DELETE demo
</span>                    <span class="n">String</span> <span class="n">userToDelete</span> <span class="p">=</span> <span class="s">"Jared"</span><span class="p">;</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">Write</span><span class="p">(</span><span class="s">"Deleting user '"</span> <span class="p">+</span> <span class="n">userToDelete</span> <span class="p">+</span> <span class="s">"', press any key to continue..."</span><span class="p">);</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">ReadKey</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>
                    <span class="n">sb</span><span class="p">.</span><span class="nf">Clear</span><span class="p">();</span>
                    <span class="n">sb</span><span class="p">.</span><span class="nf">Append</span><span class="p">(</span><span class="s">"DELETE FROM Employees WHERE Name = @name;"</span><span class="p">);</span>
                    <span class="n">sql</span> <span class="p">=</span> <span class="n">sb</span><span class="p">.</span><span class="nf">ToString</span><span class="p">();</span>
                    <span class="k">using</span> <span class="p">(</span><span class="n">SqlCommand</span> <span class="n">command</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SqlCommand</span><span class="p">(</span><span class="n">sql</span><span class="p">,</span> <span class="n">connection</span><span class="p">))</span>
                    <span class="p">{</span>
                        <span class="n">command</span><span class="p">.</span><span class="n">Parameters</span><span class="p">.</span><span class="nf">AddWithValue</span><span class="p">(</span><span class="s">"@name"</span><span class="p">,</span> <span class="n">userToDelete</span><span class="p">);</span>
                        <span class="kt">int</span> <span class="n">rowsAffected</span> <span class="p">=</span> <span class="n">command</span><span class="p">.</span><span class="nf">ExecuteNonQuery</span><span class="p">();</span>
                        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">rowsAffected</span> <span class="p">+</span> <span class="s">" row(s) deleted"</span><span class="p">);</span>
                    <span class="p">}</span>

                    <span class="c1">// READ demo
</span>                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Reading data from table, press any key to continue..."</span><span class="p">);</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">ReadKey</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>
                    <span class="n">sql</span> <span class="p">=</span> <span class="s">"SELECT Id, Name, Location FROM Employees;"</span><span class="p">;</span>
                    <span class="k">using</span> <span class="p">(</span><span class="n">SqlCommand</span> <span class="n">command</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SqlCommand</span><span class="p">(</span><span class="n">sql</span><span class="p">,</span> <span class="n">connection</span><span class="p">))</span>
                    <span class="p">{</span>

                        <span class="k">using</span> <span class="p">(</span><span class="n">SqlDataReader</span> <span class="n">reader</span> <span class="p">=</span> <span class="n">command</span><span class="p">.</span><span class="nf">ExecuteReader</span><span class="p">())</span>
                        <span class="p">{</span>
                            <span class="k">while</span> <span class="p">(</span><span class="n">reader</span><span class="p">.</span><span class="nf">Read</span><span class="p">())</span>
                            <span class="p">{</span>
                                <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"{0} {1} {2}"</span><span class="p">,</span> <span class="n">reader</span><span class="p">.</span><span class="nf">GetInt32</span><span class="p">(</span><span class="m">0</span><span class="p">),</span> <span class="n">reader</span><span class="p">.</span><span class="nf">GetString</span><span class="p">(</span><span class="m">1</span><span class="p">),</span> <span class="n">reader</span><span class="p">.</span><span class="nf">GetString</span><span class="p">(</span><span class="m">2</span><span class="p">));</span>
                            <span class="p">}</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">catch</span> <span class="p">(</span><span class="n">SqlException</span> <span class="n">e</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="nf">ToString</span><span class="p">());</span>
            <span class="p">}</span>

            <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"All done. Press any key to finish..."</span><span class="p">);</span>
            <span class="n">Console</span><span class="p">.</span><span class="nf">ReadKey</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>
<p>Build and run your project.</p>

<div class="language-terminal highlighter-rouge"><pre class="highlight"><code>dotnet run
</code></pre>
</div>
<pre><code class="language-results">Connect to SQL Server and demo Create, Read, Update and Delete operations.
Connecting to SQL Server ... Done.
Dropping and creating database 'SampleDB' ... Done.
Creating sample table with data, press any key to continue... Done.
Inserting a new row into table, press any key to continue... 1 row(s) inserted
Updating 'Location' for user 'Nikita', press any key to continue... 1 row(s) updated
Deleting user 'Jared', press any key to continue... 1 row(s) deleted
Reading data from table, press any key to continue...
2 Nikita United States
3 Tom Germany
4 Jake United States
All done. Press any key to finish...
</code></pre>
<blockquote>
  <p>You created your first C# + SQL Server app with .NET Core on Ubuntu! Check out the next section to create a C# app using an ORM!</p>
</blockquote>

<h2 id="step-22-create-a-c-app-that-connects-to-sql-server-using-the-entity-framework-core-orm-in-net-core">Step 2.2 Create a C# app that connects to SQL Server using the Entity Framework Core ORM in .NET Core</h2>

<p>Change to your home directory. Create a new .NET Core project. This will create the project directory with a basic .NET Core Program.cs and csproj file.</p>
<div class="language-terminal highlighter-rouge"><pre class="highlight"><code>cd ~/
dotnet new console -o SqlServerEFSample
</code></pre>
</div>
<pre><code class="language-results">The template "Console Application" created successfully.
</code></pre>
<p>You should already have a file called <strong>SqlServerEFSample.csproj</strong> in your .NET Core project located at: ~/SqlServerEFSample
Open this file in your favorite text editor and replace the contents with the code below to add Entity Framework Core to your project. Save and close the file.</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;Project</span> <span class="na">Sdk=</span><span class="s">"Microsoft.NET.Sdk"</span><span class="nt">&gt;</span>

  <span class="nt">&lt;PropertyGroup&gt;</span>
    <span class="nt">&lt;OutputType&gt;</span>Exe<span class="nt">&lt;/OutputType&gt;</span>
    <span class="nt">&lt;TargetFramework&gt;</span>netcoreapp1.1<span class="nt">&lt;/TargetFramework&gt;</span>
  <span class="nt">&lt;/PropertyGroup&gt;</span>

  <span class="nt">&lt;ItemGroup&gt;</span>
    <span class="nt">&lt;PackageReference</span> <span class="na">Include=</span><span class="s">"System.Data.SqlClient"</span> <span class="na">Version=</span><span class="s">"4.3.0"</span> <span class="nt">/&gt;</span>
    <span class="nt">&lt;PackageReference</span> <span class="na">Include=</span><span class="s">"Microsoft.EntityFrameworkCore.SqlServer"</span> <span class="na">Version=</span><span class="s">"1.1.1"</span> <span class="nt">/&gt;</span>
  <span class="nt">&lt;/ItemGroup&gt;</span>

<span class="nt">&lt;/Project&gt;</span>
</code></pre>
</div>
<p>For this sample, let’s create two tables. The first will hold data about “users”. Create a <strong>User.cs</strong> file in your .NET Core project located at: ~/SqlServerEFSample/User.cs</p>

<p>Copy and paste the code below into your newly created <strong>User.cs</strong> file. Save and close the file.</p>
<div class="language-c# highlighter-rouge"><pre class="highlight"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">SqlServerEFSample</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">User</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="kt">int</span> <span class="n">UserId</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
        <span class="k">public</span> <span class="n">String</span> <span class="n">FirstName</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
        <span class="k">public</span> <span class="n">String</span> <span class="n">LastName</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
        <span class="k">public</span> <span class="k">virtual</span> <span class="n">IList</span><span class="p">&lt;</span><span class="n">Task</span><span class="p">&gt;</span> <span class="n">Tasks</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

        <span class="k">public</span> <span class="n">String</span> <span class="nf">GetFullName</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="k">this</span><span class="p">.</span><span class="n">FirstName</span> <span class="p">+</span> <span class="s">" "</span> <span class="p">+</span> <span class="k">this</span><span class="p">.</span><span class="n">LastName</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">public</span> <span class="k">override</span> <span class="kt">string</span> <span class="nf">ToString</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="s">"User [id="</span> <span class="p">+</span> <span class="k">this</span><span class="p">.</span><span class="n">UserId</span> <span class="p">+</span> <span class="s">", name="</span> <span class="p">+</span> <span class="k">this</span><span class="p">.</span><span class="nf">GetFullName</span><span class="p">()</span> <span class="p">+</span> <span class="s">"]"</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>
<p>Let’s create a second table to assign tasks to users. Create a <strong>Task.cs</strong> file in your .NET Core project located at: ~/SqlServerEFSample/Task.cs</p>

<p>Copy and paste the code below into your newly created <strong>Task.cs</strong> file. Save and close the file.</p>
<div class="language-c# highlighter-rouge"><pre class="highlight"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">SqlServerEFSample</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">Task</span>
    <span class="p">{</span>
        <span class="k">public</span> <span class="kt">int</span> <span class="n">TaskId</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
        <span class="k">public</span> <span class="kt">string</span> <span class="n">Title</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
        <span class="k">public</span> <span class="n">DateTime</span> <span class="n">DueDate</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
        <span class="k">public</span> <span class="kt">bool</span> <span class="n">IsComplete</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
        <span class="k">public</span> <span class="k">virtual</span> <span class="n">User</span> <span class="n">AssignedTo</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>

        <span class="k">public</span> <span class="k">override</span> <span class="kt">string</span> <span class="nf">ToString</span><span class="p">()</span>
        <span class="p">{</span>
            <span class="k">return</span> <span class="s">"Task [id="</span> <span class="p">+</span> <span class="k">this</span><span class="p">.</span><span class="n">TaskId</span> <span class="p">+</span> <span class="s">", title="</span> <span class="p">+</span> <span class="k">this</span><span class="p">.</span><span class="n">Title</span> <span class="p">+</span> <span class="s">", dueDate="</span> <span class="p">+</span> <span class="k">this</span><span class="p">.</span><span class="n">DueDate</span><span class="p">.</span><span class="nf">ToString</span><span class="p">()</span> <span class="p">+</span> <span class="s">", IsComplete="</span> <span class="p">+</span> <span class="k">this</span><span class="p">.</span><span class="n">IsComplete</span> <span class="p">+</span> <span class="s">"]"</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>
<p>Let’s also create a class for the Entity Framework Database context. Use your favorite text editor to create the file <strong>EFSampleContext.cs</strong> file in your .NET Core project located at: ~/SqlServerEFSample/EFSampleContext.cs</p>

<p>Copy and paste the code below into your newly created <strong>EFSampleContext.cs</strong> file. Save and close the file.</p>
<div class="language-c# highlighter-rouge"><pre class="highlight"><code><span class="k">using</span> <span class="nn">Microsoft.EntityFrameworkCore</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">SqlServerEFSample</span>
<span class="p">{</span>
    <span class="k">public</span> <span class="k">class</span> <span class="nc">EFSampleContext</span> <span class="p">:</span> <span class="n">DbContext</span>
    <span class="p">{</span>
        <span class="kt">string</span> <span class="n">_connectionString</span><span class="p">;</span>
        <span class="k">public</span> <span class="nf">EFSampleContext</span><span class="p">(</span><span class="kt">string</span> <span class="n">connectionString</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">this</span><span class="p">.</span><span class="n">_connectionString</span> <span class="p">=</span> <span class="n">connectionString</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">protected</span> <span class="k">override</span> <span class="k">void</span> <span class="nf">OnConfiguring</span><span class="p">(</span><span class="n">DbContextOptionsBuilder</span> <span class="n">optionsBuilder</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">optionsBuilder</span><span class="p">.</span><span class="nf">UseSqlServer</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="n">_connectionString</span><span class="p">);</span>
        <span class="p">}</span>

        <span class="k">public</span> <span class="n">DbSet</span><span class="p">&lt;</span><span class="n">User</span><span class="p">&gt;</span> <span class="n">Users</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
        <span class="k">public</span> <span class="n">DbSet</span><span class="p">&lt;</span><span class="n">Task</span><span class="p">&gt;</span> <span class="n">Tasks</span> <span class="p">{</span> <span class="k">get</span><span class="p">;</span> <span class="k">set</span><span class="p">;</span> <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>
<p>Replace the code in the <strong>Program.cs</strong> file in your .NET Core project located at: ~/SqlServerEFSample/Program.cs</p>

<p>Open this file in your favorite text editor and replace the contents with the code below. Don’t forget to update the username and password with your own. Save and close the file.</p>

<div class="language-c# highlighter-rouge"><pre class="highlight"><code><span class="k">using</span> <span class="nn">System</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Linq</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Data.SqlClient</span><span class="p">;</span>
<span class="k">using</span> <span class="nn">System.Collections.Generic</span><span class="p">;</span>

<span class="k">namespace</span> <span class="nn">SqlServerEFSample</span>
<span class="p">{</span>
    <span class="k">class</span> <span class="nc">Program</span>
    <span class="p">{</span>
        <span class="k">static</span> <span class="k">void</span> <span class="nf">Main</span><span class="p">(</span><span class="kt">string</span><span class="p">[]</span> <span class="n">args</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"** C# CRUD sample with Entity Framework Core and SQL Server **\n"</span><span class="p">);</span>
            <span class="k">try</span>
            <span class="p">{</span>
                <span class="c1">// Build connection string
</span>                <span class="n">SqlConnectionStringBuilder</span> <span class="n">builder</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">SqlConnectionStringBuilder</span><span class="p">();</span>
                <span class="n">builder</span><span class="p">.</span><span class="n">DataSource</span> <span class="p">=</span> <span class="s">"localhost"</span><span class="p">;</span>   <span class="c1">// update me
</span>                <span class="n">builder</span><span class="p">.</span><span class="n">UserID</span> <span class="p">=</span> <span class="s">"sa"</span><span class="p">;</span>              <span class="c1">// update me
</span>                <span class="n">builder</span><span class="p">.</span><span class="n">Password</span> <span class="p">=</span> <span class="s">"your_password"</span><span class="p">;</span>      <span class="c1">// update me
</span>                <span class="n">builder</span><span class="p">.</span><span class="n">InitialCatalog</span> <span class="p">=</span> <span class="s">"EFSampleDB"</span><span class="p">;</span>

                <span class="k">using</span> <span class="p">(</span><span class="n">EFSampleContext</span> <span class="n">context</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">EFSampleContext</span><span class="p">(</span><span class="n">builder</span><span class="p">.</span><span class="n">ConnectionString</span><span class="p">))</span>
                <span class="p">{</span>
                    <span class="n">context</span><span class="p">.</span><span class="n">Database</span><span class="p">.</span><span class="nf">EnsureDeleted</span><span class="p">();</span>
                    <span class="n">context</span><span class="p">.</span><span class="n">Database</span><span class="p">.</span><span class="nf">EnsureCreated</span><span class="p">();</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Created database schema from C# classes."</span><span class="p">);</span>

                    <span class="c1">// Create demo: Create a User instance and save it to the database
</span>                    <span class="n">User</span> <span class="n">newUser</span> <span class="p">=</span> <span class="k">new</span> <span class="n">User</span> <span class="p">{</span> <span class="n">FirstName</span> <span class="p">=</span> <span class="s">"Anna"</span><span class="p">,</span> <span class="n">LastName</span> <span class="p">=</span> <span class="s">"Shrestinian"</span> <span class="p">};</span>
                    <span class="n">context</span><span class="p">.</span><span class="n">Users</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">newUser</span><span class="p">);</span>
                    <span class="n">context</span><span class="p">.</span><span class="nf">SaveChanges</span><span class="p">();</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"\nCreated User: "</span> <span class="p">+</span> <span class="n">newUser</span><span class="p">.</span><span class="nf">ToString</span><span class="p">());</span>

                    <span class="c1">// Create demo: Create a Task instance and save it to the database
</span>                    <span class="n">Task</span> <span class="n">newTask</span> <span class="p">=</span> <span class="k">new</span> <span class="nf">Task</span><span class="p">()</span> <span class="p">{</span> <span class="n">Title</span> <span class="p">=</span> <span class="s">"Ship Helsinki"</span><span class="p">,</span> <span class="n">IsComplete</span> <span class="p">=</span> <span class="k">false</span><span class="p">,</span> <span class="n">DueDate</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="nf">Parse</span><span class="p">(</span><span class="s">"04-01-2017"</span><span class="p">)</span> <span class="p">};</span>
                    <span class="n">context</span><span class="p">.</span><span class="n">Tasks</span><span class="p">.</span><span class="nf">Add</span><span class="p">(</span><span class="n">newTask</span><span class="p">);</span>
                    <span class="n">context</span><span class="p">.</span><span class="nf">SaveChanges</span><span class="p">();</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"\nCreated Task: "</span> <span class="p">+</span> <span class="n">newTask</span><span class="p">.</span><span class="nf">ToString</span><span class="p">());</span>

                    <span class="c1">// Association demo: Assign task to user
</span>                    <span class="n">newTask</span><span class="p">.</span><span class="n">AssignedTo</span> <span class="p">=</span> <span class="n">newUser</span><span class="p">;</span>
                    <span class="n">context</span><span class="p">.</span><span class="nf">SaveChanges</span><span class="p">();</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"\nAssigned Task: '"</span> <span class="p">+</span> <span class="n">newTask</span><span class="p">.</span><span class="n">Title</span> <span class="p">+</span> <span class="s">"' to user '"</span> <span class="p">+</span> <span class="n">newUser</span><span class="p">.</span><span class="nf">GetFullName</span><span class="p">()</span> <span class="p">+</span> <span class="s">"'"</span><span class="p">);</span>

                    <span class="c1">// Read demo: find incomplete tasks assigned to user 'Anna'
</span>                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"\nIncomplete tasks assigned to 'Anna':"</span><span class="p">);</span>
                    <span class="kt">var</span> <span class="n">query</span> <span class="p">=</span> <span class="k">from</span> <span class="n">t</span> <span class="k">in</span> <span class="n">context</span><span class="p">.</span><span class="n">Tasks</span>
                                <span class="k">where</span> <span class="n">t</span><span class="p">.</span><span class="n">IsComplete</span> <span class="p">==</span> <span class="k">false</span> <span class="p">&amp;&amp;</span>
                                <span class="n">t</span><span class="p">.</span><span class="n">AssignedTo</span><span class="p">.</span><span class="n">FirstName</span><span class="p">.</span><span class="nf">Equals</span><span class="p">(</span><span class="s">"Anna"</span><span class="p">)</span>
                                <span class="k">select</span> <span class="n">t</span><span class="p">;</span>
                    <span class="k">foreach</span><span class="p">(</span><span class="kt">var</span> <span class="n">t</span> <span class="k">in</span> <span class="n">query</span><span class="p">)</span>
                    <span class="p">{</span>
                        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">t</span><span class="p">.</span><span class="nf">ToString</span><span class="p">());</span>
                    <span class="p">}</span>

                    <span class="c1">// Update demo: change the 'dueDate' of a task
</span>                    <span class="n">Task</span> <span class="n">taskToUpdate</span> <span class="p">=</span> <span class="n">context</span><span class="p">.</span><span class="n">Tasks</span><span class="p">.</span><span class="nf">First</span><span class="p">();</span> <span class="c1">// get the first task
</span>                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"\nUpdating task: "</span> <span class="p">+</span> <span class="n">taskToUpdate</span><span class="p">.</span><span class="nf">ToString</span><span class="p">());</span>
                    <span class="n">taskToUpdate</span><span class="p">.</span><span class="n">DueDate</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="nf">Parse</span><span class="p">(</span><span class="s">"06-30-2016"</span><span class="p">);</span>
                    <span class="n">context</span><span class="p">.</span><span class="nf">SaveChanges</span><span class="p">();</span>
                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"dueDate changed: "</span> <span class="p">+</span> <span class="n">taskToUpdate</span><span class="p">.</span><span class="nf">ToString</span><span class="p">());</span>

                    <span class="c1">// Delete demo: delete all tasks with a dueDate in 2016
</span>                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"\nDeleting all tasks with a dueDate in 2016"</span><span class="p">);</span>
                    <span class="n">DateTime</span> <span class="n">dueDate2016</span> <span class="p">=</span> <span class="n">DateTime</span><span class="p">.</span><span class="nf">Parse</span><span class="p">(</span><span class="s">"12-31-2016"</span><span class="p">);</span>
                    <span class="n">query</span> <span class="p">=</span> <span class="k">from</span> <span class="n">t</span> <span class="k">in</span> <span class="n">context</span><span class="p">.</span><span class="n">Tasks</span>
                            <span class="k">where</span> <span class="n">t</span><span class="p">.</span><span class="n">DueDate</span> <span class="p">&lt;</span> <span class="n">dueDate2016</span>
                            <span class="k">select</span> <span class="n">t</span><span class="p">;</span>
                    <span class="k">foreach</span><span class="p">(</span><span class="n">Task</span> <span class="n">t</span> <span class="k">in</span> <span class="n">query</span><span class="p">)</span>
                    <span class="p">{</span>
                        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"Deleting task: "</span> <span class="p">+</span> <span class="n">t</span><span class="p">.</span><span class="nf">ToString</span><span class="p">());</span>
                        <span class="n">context</span><span class="p">.</span><span class="n">Tasks</span><span class="p">.</span><span class="nf">Remove</span><span class="p">(</span><span class="n">t</span><span class="p">);</span>
                    <span class="p">}</span>
                    <span class="n">context</span><span class="p">.</span><span class="nf">SaveChanges</span><span class="p">();</span>

                    <span class="c1">// Show tasks after the 'Delete' operation - there should be 0 tasks
</span>                    <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"\nTasks after delete:"</span><span class="p">);</span>
                    <span class="n">List</span><span class="p">&lt;</span><span class="n">Task</span><span class="p">&gt;</span> <span class="n">tasksAfterDelete</span> <span class="p">=</span> <span class="p">(</span><span class="k">from</span> <span class="n">t</span> <span class="k">in</span> <span class="n">context</span><span class="p">.</span><span class="n">Tasks</span> <span class="k">select</span> <span class="n">t</span><span class="p">).</span><span class="n">ToList</span><span class="p">&lt;</span><span class="n">Task</span><span class="p">&gt;();</span>
                    <span class="k">if</span> <span class="p">(</span><span class="n">tasksAfterDelete</span><span class="p">.</span><span class="n">Count</span> <span class="p">==</span> <span class="m">0</span><span class="p">)</span>
                    <span class="p">{</span>
                        <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"[None]"</span><span class="p">);</span>
                    <span class="p">}</span>
                    <span class="k">else</span>
                    <span class="p">{</span>
                        <span class="k">foreach</span> <span class="p">(</span><span class="n">Task</span> <span class="n">t</span> <span class="k">in</span> <span class="n">query</span><span class="p">)</span>
                        <span class="p">{</span>
                            <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">t</span><span class="p">.</span><span class="nf">ToString</span><span class="p">());</span>
                        <span class="p">}</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
            <span class="k">catch</span> <span class="p">(</span><span class="n">Exception</span> <span class="n">e</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="n">e</span><span class="p">.</span><span class="nf">ToString</span><span class="p">());</span>
            <span class="p">}</span>

            <span class="n">Console</span><span class="p">.</span><span class="nf">WriteLine</span><span class="p">(</span><span class="s">"All done. Press any key to finish..."</span><span class="p">);</span>
            <span class="n">Console</span><span class="p">.</span><span class="nf">ReadKey</span><span class="p">(</span><span class="k">true</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre>
</div>
<p>Change directories into the project folder and restore the dependencies in the csproj by running the following commands.</p>
<div class="language-terminal highlighter-rouge"><pre class="highlight"><code>cd ~/SqlServerEFSample
dotnet restore
</code></pre>
</div>

<pre><code class="language-results">COPY
Results
Restoring packages for /Users/usr1/SqlServerEFSample/SqlServerEFSample.csproj...
  Generating MSBuild file /Users/usr1/SqlServerEFSample/obj/SqlServerEFSample.csproj.nuget.g.props.
  Generating MSBuild file /Users/usr1/SqlServerEFSample/obj/SqlServerEFSample.csproj.nuget.g.targets.
  Writing lock file to disk. Path: /Users/usr1/SqlServerEFSample/obj/project.assets.json
  Restore completed in 5.79 sec for /Users/usr1/SqlServerEFSample/SqlServerEFSample.csproj.

  NuGet Config files used:
      /Users/usr1/.nuget/NuGet/NuGet.Config

  Feeds used:
      https://api.nuget.org/v3/index.json
</code></pre>
<p>Now build and run.</p>

<div class="language-terminal highlighter-rouge"><pre class="highlight"><code>dotnet run
</code></pre>
</div>

<pre><code class="language-results">** C# CRUD sample with Entity Framework Core and SQL Server **

Created database schema from C# classes.

Created User: User [id=1, name=Anna Shrestinian]

Created Task: Task [id=1, title=Ship Helsinki, dueDate=4/1/17 12:00:00 AM, IsComplete=False]

Assigned Task: 'Ship Helsinki' to user 'Anna Shrestinian'

Incomplete tasks assigned to 'Anna':
Task [id=1, title=Ship Helsinki, dueDate=4/1/17 12:00:00 AM, IsComplete=False]

Updating task: Task [id=1, title=Ship Helsinki, dueDate=4/1/17 12:00:00 AM, IsComplete=False]
dueDate changed: Task [id=1, title=Ship Helsinki, dueDate=6/30/16 12:00:00 AM, IsComplete=False]

Deleting all tasks with a dueDate in 2016
Deleting task: Task [id=1, title=Ship Helsinki, dueDate=6/30/16 12:00:00 AM, IsComplete=False]

Tasks after delete:
[None]
All done. Press any key to finish...
</code></pre>
<blockquote>
  <p>Congrats you just created two C# apps! Check out the next section to learn about how you can <strong>make your C# apps faster with SQL Server’s Columnstore feature</strong></p>
</blockquote>


  </div>

  
    
    
      

      

      <a class="sql-page_steps-next"
        href="/csharp/rhel/step/3"
        target="_self">
        Go to step 3
      </a>

    
  

  <div class="sql-questions">
    <h2 class="sql-questions-title">
        Have Questions?
    </h2>
    <p class="sql-questions-text">
        Happy to help! You can find us on <a href="https://github.com/Microsoft/sql-server-samples/tree/master/samples/tutorials" target="_blank">GitHub</a>, <a href="https://social.msdn.microsoft.com/Forums/en-US/home target="_blank"">MSDN Forums</a>, and StackOverflow. We also monitor the <a href="https://twitter.com/search?q=%23SQLServerDev&amp;src=typd" target="_blank">#SQLServerDev</a> hashtag on Twitter.
    </p>
</div>

  
      <footer class="sql-disqus">
        

      </footer>
  
</article>

      </div>
    </main>

    <footer class="sql-footer">
  




    <div class="sql-footer-copy">
        <a class="sql-footer-link" href="https://go.microsoft.com/?linkid=2028325">Contact us</a> | 
        <a class="sql-footer-link" href="https://go.microsoft.com/fwlink/?LinkId=521839">Privacy & cookies</a> | 
        <a class="sql-footer-link" href="https://go.microsoft.com/fwlink/?LinkID=206977">Terms of use</a> | 
        <a class="sql-footer-link" href="https://www.microsoft.com/trademarks">Trademarks</a> | 
        <a class="sql-footer-link" href="https://choice.microsoft.com/">About our ads</a> | 
        © 2017 Microsoft 
      <!--
        <a href="#" target="_blank" class="sql-footer-icon fa fa-twitter" aria-hidden="true" style="float:right;"></a>
        <a href="#" target="_blank" class="sql-footer-icon fa fa-github" aria-hidden="true" style="float:right;"></a>
      -->
    </div>

           
</footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.6.0/clipboard.min.js" type="text/javascript"></script>
<script src="https://use.fontawesome.com/c7b2a63f93.js"></script>
<script src="/assets/scripts/prism.js" type="text/javascript"></script>
<script src="/assets/scripts/steps.js" type="text/javascript"></script>
<script>
  ((window.gitter = {}).chat = {}).options = {
    room: 'Microsoft/mssql-developers'
  };
</script>
<script src="https://sidecar.gitter.im/dist/sidecar.v1.js" async defer></script>
  </body>

</html>
